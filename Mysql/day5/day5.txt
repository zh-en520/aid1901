一.锁
1.概念:锁是对数据的控制权
2.目的:解决多个工作单元并发操作数据所导致的问题
3.分类:
  --锁类型
   -读锁(共享锁):select操作时加锁,加锁之后其它工作单元可以读/不能写数据
   -写锁(排它锁):insert/delete/update操作时加锁,加锁之后不能读/写
  
  --锁粒度
   -行级锁:锁定一行,并发效率高,资源消耗较多
   -表级锁:锁定整张表,并发效率低,资源消耗少

二.存储引擎
1.什么是存储引擎
  表的存储方式,包括存储机制/索引机制/锁定方式
2.基本操作
  1)查看:show engines;
  2)查看表的存储引擎:通过建表语句查看
  3)修改:
    alter table t1 engine = MyISAM;
3.
1)InnoDB
  --特点:支持事务/行级锁/外键共享表空间
  --文件构成:
    表名.frm:表结构和索引
    表名.ibd:表记录
  *show global variables
  like '%datadir%' 查看数据存储目录
  需要sudo-i切换root用户才能查看
   /var/lib/mysql/eshop# ls tt
  
  --适用情景:
   更新密集的表
   有事务要求
   有外键约束要求
   需要支持自增长字段08

2)MyISAM
  --特点:不支持事务/行级锁/外键,
         访问速度快,独占表空间
  
  --文件:
    表名.frm:表结构
    表名.myd:表记录
    表名.myi:索引

    create table tt(
        name varchar(32)
    ) engine = MyISAM;

  --使用情景:
   -查询请求较多的表;
   -数据一致性要求较低;
   -不需要外键约束

3)Memory
  --特点:
   -访问速度快:表结构存于磁盘,数据存于内存;数据库重启后,数据丢失;

  --文件构成:
    表名.frm

  --适用情景:
    数据量小/速度要求高/数据丢失影响小

三.E-R概念模型
1)什么是E-R概念模型:实体-关系模型,用一种抽象化的方式来表达数据,数据之间的联系
2)优点:能够很好的将数据,数据之间的联系直观地表达出来
3)实体之间的对应关系:
  一对一:老公 <-->老婆
  一对多:父亲 <-->孩子
        客户 <-->订单
        账户 <-->交易明细
  多对多:兄弟姊妹 <-->兄弟姊妹
        学生 <-->课程
4)E-R图:用图形化方式表达实体-关系
见PPT

四.Python访问数据库:PyMySQL
1)安装
 1.在线安装:sudo pip3 install pymysql
 2.离线安装:
  第一步,下载安装包:http://pypi.org/project/PyMySQL/#files
  例如下载包名称为:PyMySQL-0.9.3.tar.gz
  第二步,解压:tar -zxvf PyMySQL-0.9.3.tar.gz
  第三步:进入解压后的目录,执行安装
  cd PyMySQL-0.9.3
  python3 setup.py install
  第四步:验证.进入python交互模式,执行import pymysql命令,如果不报错,说明安装成功.

2)PyMySQL访问数据库的步骤:
 1)导入pymysql模块
 2)创建数据库连接
 3)创建游标对象
 4)使用游标对象提供的方法,执行SQL语句
 5)提交事务(如果需要)
 6)关闭游标
 7)关闭数据库连接